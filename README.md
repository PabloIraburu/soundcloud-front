# SOUNDMIST <code><img alt="Soundmist" height="44" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/favicon.png"></code>

## FULL STACK MASTER FINAL PROJECT

We are glad to share with you our final project of the Master Full Stack Developer.

We would like to speally thank our teachers, for their patience and motivation in those last 3 months of hardworking, learning and enjoying creating this app, and to Nuclio Digital School.

<code><img alt="javascript" height="88" src="https://nuclio.school/shorts/wp-content/uploads/2020/03/NuclioSchoollogo-black.png"></code>


## DESCRIPTION

Soundmist is a new and authentic app where you can find and play the best music from known, as well as alternative artists.  

## LIVE DEMO

Take a look at our music App, you will love it üòú!

<https://soundmist.netlify.app>

![alt text](https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/livedemo.png "Soundmist Livedemo")

##### DESIGN INSPIRATION

Inspired in the [Music WebApp Concept | darkmusic](https://dribbble.com/shots/14554312-Music-WebApp-Concept-darkmusic "Music WebApp Concept by Dany Arkan") by [Dany Arkan](https://dribbble.com/danyarkan "Dany Arkan Dribble Profile")

and in the [Video & Sound Studio Design](https://dribbble.com/shots/6256092-Video-Sound-Studio-design-concept "Video & Sound Studio Design") by [≈Åukasz ≈ªydek](https://dribbble.com/netflayo "≈Åukasz ≈ªydek Dribble Profile")

## LANGUAGES, FRAMEWORKS AND LIBRARIES

#### MAIN LANGUAGES AND LIBRARIES

##### FRONTEND
<code><img alt="Javascript" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/javascript/javascript.png"></code>
<code><img alt="Html" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/html/html.png"></code>
<code><img alt="Css" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/css/css.png"></code>
<code><img alt="Sass" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/sass/sass.png"></code>
<code><img alt="React" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/react/react.png"></code>
<code><img alt="Material UI" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/materialui.png?raw=true"></code>
<code><img alt="React H5 Player" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/player.png?raw=true"></code>

##### BACKEND

<code><img alt="Nodejs" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/nodejs/nodejs.png"></code>
<code><img alt="Express" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/express/express.png"></code>
<code><img alt="Mongoose" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/mongoose/mongoose.png"></code>
<code><img alt="Mongodb" height="33" src="https://raw.githubusercontent.com/github/explore/80688e429a7d4ef2fca1e82350fe8e3517d3494d/topics/mongodb/mongodb.png"></code>

#### TECHNOLOGIES
<code><img alt="Github" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/github.png?raw=true"></code>
<code><img alt="Git" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/git.png?raw=true"></code>
<code><img alt="Heroku" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/heroku.png?raw=true"></code>
<code><img alt="Netlify" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/netlify.png?raw=true"></code>

#### SOFTWARE
<code><img height="33" alt="Visual Studio Code" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/visualstudiocode.png"></code>
<code><img height="33" alt="Webstorm" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/webstorm.png"></code>
<code><img height="33" alt="Postman" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/postman.png"></code>
<code><img height="33" alt="Insomnia" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/insomnia.png"></code>
<code><img height="33" alt="Slack" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/slack.png"></code>
<code><img height="33" alt="Trello" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/trello.png"></code>
<code><img height="33" alt="Google" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/google.png"></code>
<code><img height="33" alt="Illustrator" src="https://raw.githubusercontent.com/PabloIraburu/soundcloud-front/Master/public/readme_img/illustrator.png"></code>

#### OTHER PLATFORMS
<code><img alt="Google Fonts" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/googlefonts.png?raw=true"></code>
<code><img alt="Stackoverflow" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/stackoverflow.png?raw=true"></code>
<code><img alt="Soundcloud" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/soundcloud.png?raw=true"></code>
<code><img alt="Spotify" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/spotify.png?raw=true"></code>
<code><img alt="Dribble" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/dribble.png?raw=true"></code>
<code><img alt="Unsplash" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/unsplash.png?raw=true"></code>
<code><img alt="Freepik" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/freepik.png?raw=true"></code>
<code><img alt="Gradient" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/gradient.png?raw=true"></code>
<code><img alt="Color Hunt" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/colorhunt.png?raw=true"></code>
<code><img alt="Emojipedia" height="33" src="https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/emojipedia.png?raw=true"></code>


## TAKE A LOOK AT...

* Data Architecture (back + front)

![alt text](https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/Arquitectura_datos.png "Data Architecture")

* Server Request Code

```javascript
export const ServerRequest = (routes, method, body) => {
    const token = getToken();
    const url = `${API_URL}/${routes}`;

    const JSONBody = JSON.stringify(body);
    const options = {
        method: method,
        mode: 'cors',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + JSON.parse(token)
        },
        body: JSONBody
    }

    let response;

    return fetch(url, options)
        .catch(error => (error))
        .then(res => {
            if (res.status >= 400) {
                response = res;
            }
            return res.json();
        })
        .then(resJson => {
            return new Promise((resolve, reject) => {
                if (response) {
                    reject(resJson);
                } else {
                    resolve(resJson)
                }
            });
        });
}
```
* Landing + Login + Register
```javascript
  app.post("/login", async (req, res) => {
    const { email, password } = req.body;
    const users = await User.find({ email });

    if (
      users.length === 1 &&
      passwordHash.verify(password, users[0].password)
    ) {
      const user = users[0];
      const token = jwt.sign({ id: user._id }, jwtSecret);
      res.status(200).send({ token });
    } else {
      res.status(401).send({ message: "Username or password incorrect" });
    }
  });
```
* UserContext

```javascript
export const UserContextProvider = ({ children }) => {

  const userId = DecodeToken(getToken()).id;
  const [user, setUser] = useState({});

  useEffect(() => {
    ServerRequest(`data/user/${userId}`, "GET")
      .then((response) => setUser(response))
      .catch(console.log);
  }, []);

  return <UserContext.Provider value={{ userId, user, setUser }}>{children}</UserContext.Provider>
}
```
* Router

```javascript
export const MainRouter = () => {

  const PrivateRoute = ({ component: Component, path }) => (
    <Route
      path={path}
      render={() => getToken() ? <Component /> : <Redirect to={route.HOME} />}
    />
  )

  return (
    <>
      <UserContextProvider>
        <PlayerContextProvider>
          <div className="Mainrouter-player">
            <Player />
          </div>
          <div>
            <LateralBar />
            <FollowLateralBar />
            <div className="MainRouter-wrap">
              <Switch>
                <PrivateRoute exact path={route.DISCOVER} component={Discover} />
                <PrivateRoute exact path={route.MYSONGS} component={MySongs} />
                <PrivateRoute exact path={route.ALBUMS} component={Albums} />
                <PrivateRoute exact path={route.PLAYLISTS} component={Playlists} />
                <PrivateRoute exact path={route.FAVOURITES} component={Favourites} />
                <PrivateRoute exact path={route.PROFILE} component={Profile} />
                <PrivateRoute exact path={route.EDITPROFILE} component={EditProfile} />
                <PrivateRoute exact path={route.ALBUMDETAIL} component={EntityDetail} />
                <PrivateRoute exact path={route.PLAYLISTDETAIL} component={EntityDetail} />
                {/* <Redirect to="/discover" /> */}
              </Switch>
            </div>
          </div>
        </PlayerContextProvider>
      </UserContextProvider>
    </>
  );
};
```
* Portada + Songs + Playlists

![alt text](https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/discover.png "Discover Page")

* Nav Irz - Animaci√≥n

```html
                <li className="logo">
                    <div className="nav-link">
                        <div className="navBar-logo-section">
                            <img src={logo} className="navBar-logo" alt="logo" />
                            <Link exact to={route.DISCOVER}>
                                <p className="navBar-logo-text">SoundMist</p>
                            </Link>
                        </div>
                        <svg
                            aria-hidden="true"
                            focusable="false"
                            data-prefix="fad"
                            data-icon="angle-double-right"
                            role="img"
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 448 512"
                            className="svg-inline--fa fa-angle-double-right fa-w-14 fa-5x"
                        >
                            <g className="fa-group">
                                <path
                                    fill="currentColor"
                                    d="M415.89 273L280.34 409a23.77 23.77 0 0 1-33.79 0L224 386.26a23.94 23.94 0 0 1 0-33.89L320.11 256l-96-96.47a23.94 23.94 0 0 1 0-33.89l22.52-22.59a23.77 23.77 0 0 1 33.79 0L416 239a24 24 0 0 1-.11 34z"
                                    className="fa-primary"
                                ></path>
                                <path
                                    fill="currentColor"
                                    d="M224 273L88.37 409a23.78 23.78 0 0 1-33.8 0L32 386.36a23.94 23.94 0 0 1 0-33.89l96.13-96.37L32 159.73a23.94 23.94 0 0 1 0-33.89l22.44-22.79a23.78 23.78 0 0 1 33.8 0L223.88 239a23.94 23.94 0 0 1 .1 34z"
                                    className="fa-secondary"
                                ></path>
                            </g>
                        </svg>
                    </div>
                </li>
```
* PlayerReducer + PlayerContext + Player

```javascript
import { useReducer } from "react";

const initialState = {
    reproduceSongList: [],
    currentPlay: undefined,
}

export const playerActions = {
    PLAY_SONG: 'PLAY_SONG',
    NEXT_SONG: 'NEXT_SONG',
}

const playerReducer = (state, action) => {

    const newState = { ...state }

    switch (action.type) {
        case playerActions.PLAY_SONG:
            newState.reproduceSongList = [action.song];
            newState.currentPlay = 0;
            return newState;

        case playerActions.NEXT_SONG:
            if (state.currentPlay < (state.reproduceSongList.length - 1)) {
                newState.currentPlay = state.currentPlay + 1;
            }
            return newState;

        default:
            return state;
    }
}

export const usePlayerReducer = () => useReducer(playerReducer, initialState);
```

* Upload Track

```javascript
const handleSubmit = (file, e) => {
        const data = new FormData();
        data.append("file", file[0]);
        data.append("filename", file[0].name);
        data.append("title", song.title);
        data.append("album", song.album);
        data.append("artist", song.artist);
        data.append("image", song.image);
        data.append("category", song.category);
        data.append("id_author", userId)

        const options = {
            method: "POST",
            body: data,
            headers: new Headers({
                Authorization: "Bearer " + JSON.parse(getToken()),
            }),
            mode: "cors",
        };
        fetch(`${API_URL}/track`, options)
            .then((response) => {
                if (response.status === 201) {
                    return response;
                }
            })
            .then((response) => {
                setForceReload(!forceReload)
                handleClose(e)
                notify('Song Uploaded Correctly')
            })
            .catch((error) => console.log(error));
    };
```

* Nav Followers & Currently Playing

```javascript
    useEffect(() => {
        ServerRequest(`data/user`, "GET")
            .then((response) => {
                const res = (response.filter(r => r._id !== loggedUserId));
                setAllUsers(res)
                ServerRequest(`data/follower/?follower=${loggedUserId}`, "GET") //Devuelve array de los usuarios que sigo
                    .then(response => {
                        let followedPeeps = response.map(u => u.followed)
                        setFollowing(response.map(f => res.find(u => u._id === f.followed)));
                        setNonFollowing(res.filter(u => !followedPeeps.includes(u._id)))
                    })
                    .catch(console.log);
            })
            .catch(console.log);
    }, [reload]);
```
```javascript
<div className={styles["NowPlaying"]}>
    <h3>Currently playing</h3>
    <div className={styles["Playlist"]}>
        {player.reproduceSongList.map(s =>
            <NowPlayingItem
               key={s._id}
               entity={s}
               id={s._id}
               title={s.title}
               author={s.artist}
               categories={s.category}
               img={s.image}
            />
        )}
    </div>
</div>
```

* Search

```javascript
    const handleChange = (e) => {
        setSearchItem(e.target.value);
    };

    useEffect(() => {
        const results = songs.filter(art => art.title.toLowerCase().includes(searchItem));
        setSearchResults(results);
    }, [searchItem]);
```

* Profile + Edit Profile Pages

![alt text](https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/perfil.png "Profile and Edit Profile Pages")

* My Songs Page


* Playlists Page


* Playlist Detail Page

![alt text](https://github.com/PabloIraburu/soundcloud-front/blob/Master/public/readme_img/entitydetail.png "Entity Detail Page")

* Favourites Page




## AUTHORS

* [Pablo Iraburu](https://github.com/PabloIraburu)
* [Cristina Picatoste](https://github.com/cristinapicatoste)
* [Gabriela Viana](https://github.com/gabviana)
* [Isa Almena](https://github.com/saintAlmond)
* [Juli√°n Villada](https://github.com/julianvillada)


#### COLLABORATORS

* [Aitor Tusell](https://github.com/aitortg)
* [Pep Nieto](https://github.com/PepNieto)
* [Lluis B√≤ria](https://github.com/lluisbo)
* [Zhiting Lu](https://github.com/ZhitingLu)

## SPECIAL THANKS

* [Guillermo Blasco](https://github.com/GuillermoBlasco)
* [Carlos Arenas](https://github.com/carlosarenasf)
* [Jose Manuel Cano](https://github.com/jmcano94)
* [Patricia Mateos](https://github.com/pattirock)
